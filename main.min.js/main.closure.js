!function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var h=Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(e("./core"),e("./vector2")),s=e("./sat/SAT.js"),a=function(){function e(t){i(this,e),this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.active=t.active||!0,this.visible=t.visible||!0,this.np=new r.Vector2(this.x,this.y),this.velocity=new r.Vector2(0,0),this.colliding=!1,this.shape=new s.Box(new s.Vector(this.x,this.y),this.width,this.height).toPolygon()}return o(e,[{key:"draw",value:function(){}},{key:"update",value:function(){}}]),e}();n.BasicObject=a},{"./core":4,"./sat/SAT.js":12,"./vector2":14}],2:[function(e,t,n){"use strict";function i(e,t,n,i){var r=n+o.Core.camera.x-(e+o.Core.camera.x),s=i+o.Core.camera.y-(t+o.Core.camera.y);return Math.atan2(s,r)}Object.defineProperty(n,"__esModule",{value:!0}),n.angle=i;var o=e("./core")},{"./core":4}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var o=e,r=t,s=n;a=h=l=void 0,i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var h=Object.getPrototypeOf(o);if(null===h)return void 0;e=h,t=r,n=s,i=!0}},a=e("./rectangle"),l=function(e){function t(e,n,o,r){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,o,r),this.follow=null,this.cameraMaxY=0,this.normalizedByMapHeight=0,this.normalizedMapY=0}return o(t,e),r(t,[{key:"reset",value:function(){this.cameraMaxY=0,this.normalizedByMapHeight=0,this.normalizedMapY=0,this.x=0,this.y=0}},{key:"setObjectToFollow",value:function(e){this.follow=e}},{key:"update",value:function(){null!=this.follow&&(this.y+=.05*(this.follow.y-(this.y+this.h/3))>>0),this.y>this.cameraMaxY&&(this.cameraMaxY=this.y),this.y=Math.max(this.cameraMaxY,this.y),this.normalizedMapY=this.y/384>>0,this.normalizedMapHeight=(this.y+this.h)/384>>0}}]),t}(a.Rectangle);n.Camera=l},{"./rectangle":11}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={};n.Core=i;var o=e("pathfinding");i.ctx=null,i.canvas=null,i.screen=null,i.camera=null,i.keys=[],i.maps=[],i.mouse=[],i.player=null,i.pathfinderGrid=new o.Grid(15,48),i.pathfinder=new o.AStarFinder,i.resetGame=null},{pathfinding:21}],5:[function(e,t,n){"use strict";function i(e,t,n,i){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-i,2))}Object.defineProperty(n,"__esModule",{value:!0}),n.distance=i},{}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("./core"),s=e("./vector2"),a=e("./camera"),l=e("./mouse"),h=e("./keys"),c=function(){function e(t){i(this,e),this.screen={size:new s.Vector2(t.screen.size.x,t.screen.size.y),center:t.screen.center,background:t.screen.background},this.containerID=t.containerID,this.setUp(),r.Core.screen=this.screen}return o(e,[{key:"setUp",value:function(){this.container=document.getElementById(this.containerID),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.screen.size.x,this.canvas.height=this.screen.size.y,this.container.style.width=this.screen.size.x+"px",this.container.style.height=this.screen.size.y+"px",this.container.style.background=this.screen.background,this.screen.center&&this.container.classList.add("center"),this.container.appendChild(this.canvas),r.Core.canvas=this.canvas,r.Core.ctx=this.ctx,r.Core.camera=new a.Camera(0,0,this.screen.size.x,this.screen.size.y),r.Core.mouse=new l.Mouse,h.InitKeys(),requestAnimationFrame(this.step.bind(this))}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.screen.size.x,this.screen.size.y)}},{key:"update",value:function(){r.Core.camera.update(),r.Core.mouse.update()}},{key:"step",value:function(){this.draw(),this.update(),r.Core.mouse.draw(),requestAnimationFrame(this.step.bind(this))}}]),e}();n.Game=c},{"./camera":3,"./core":4,"./keys":7,"./mouse":9,"./vector2":14}],7:[function(e,t,n){"use strict";function i(){document.body.addEventListener("keydown",function(e){o.Core.keys[e.keyCode]=!0},!1),document.body.addEventListener("keyup",function(e){o.Core.keys[e.keyCode]=!1},!1)}Object.defineProperty(n,"__esModule",{value:!0}),n.InitKeys=i;var o=e("./core")},{"./core":4}],8:[function(e,t,n){"use strict";function i(e,t,n){return(e-t)*n}Object.defineProperty(n,"__esModule",{value:!0}),n.lerp=i},{}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("./core"),s=e("./vector2"),a=(e("./BasicObject"),e("./distance")),l=function(){function e(){i(this,e),this.x=0,this.y=0,this.screen=new s.Vector2(0,0),this.lastClick=new s.Vector2(32,16),this.down=!1,this.rect=null,this.justPressed=!1,this.maxSize=10,this.size=10,this.state="Free",this.IDenemyLocked=0,r.Core.canvas.addEventListener("mousemove",function(e){this.setMousePosition(e)}.bind(this)),r.Core.canvas.addEventListener("mousedown",function(e){this.setMousePosition(e),this.down=!0,this.justPressed=!0,this.lastClick.x=this.screen.x,this.lastClick.y=this.screen.y}.bind(this)),r.Core.canvas.addEventListener("mouseup",function(e){this.setMousePosition(e),this.down=!1}.bind(this))}return o(e,[{key:"setMousePosition",value:function(e){this.rect=r.Core.canvas.getBoundingClientRect(),this.x=e.clientX-this.rect.left,this.y=e.clientY-this.rect.top,this.screen.x=this.x+r.Core.camera.x,this.screen.y=this.y+r.Core.camera.y}},{key:"checkDistanceToEnemy",value:function(){for(var e=0;e<r.Core.maps[Math.floor(this.screen.y/384)%r.Core.maps.length].enemies.length;e++){var t=r.Core.maps[Math.floor(this.screen.y/384)%r.Core.maps.length].enemies[e];a.distance(t.x+t.width/2,t.y+t.height/2,this.screen.x,this.screen.y)<10&&1==t.visible&&(this.IDenemyLocked=e,this.state="Locked")}}},{key:"drawFree",value:function(){r.Core.ctx.strokeStyle="#181818",r.Core.ctx.fillStyle="rgba(255,255,255,0.2)",r.Core.ctx.beginPath(),r.Core.ctx.arc(this.x,this.y,this.size,2*Math.PI,0,!1),r.Core.ctx.closePath(),r.Core.ctx.stroke(),r.Core.ctx.fill()}},{key:"updateFree",value:function(){this.justPressed&&(this.size=2),this.size+=.2*(this.maxSize-this.size),this.checkDistanceToEnemy()}},{key:"drawLocked",value:function(){r.Core.ctx.strokeStyle="#181818",r.Core.ctx.fillStyle="rgba(255,25,25,0.2)",r.Core.ctx.beginPath(),r.Core.ctx.arc(this.x,this.y,this.size,2*Math.PI,0,!1),r.Core.ctx.closePath(),r.Core.ctx.stroke(),r.Core.ctx.fill()}},{key:"updateLocked",value:function(){this.size+=.2*(16-this.size);var e=r.Core.maps[Math.floor(this.screen.y/384)%r.Core.maps.length].enemies[this.IDenemyLocked];this.x=e.x-r.Core.camera.x+e.width/2,this.y=e.y-r.Core.camera.y+e.height/2,a.distance(e.x+e.width/2,e.y+e.height/2,this.screen.x,this.screen.y)>20&&(this.state="Free"),this.justPressed&&r.Core.player.shoot(e.x+e.width/2,e.y+e.height/2)}},{key:"draw",value:function(){this["draw"+this.state]()}},{key:"update",value:function(){this["update"+this.state]()}}]),e}();n.Mouse=l},{"./BasicObject":1,"./core":4,"./distance":5,"./vector2":14}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={"int":function(e,t){return Math.floor(i["float"](e,t))},"float":function(e,t){return Math.floor(Math.random()*(e-t+1)+t)}};n.Random=i},{}],11:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function r(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],o=arguments.length<=3||void 0===arguments[3]?0:arguments[3];i(this,r),this.x=e,this.y=t,this.w=n,this.h=o};n.Rectangle=o},{}],12:[function(e,t,n){"use strict";!function(e,i){"function"==typeof define&&define.amd?define(i):"object"==typeof n?t.exports=i():e.SAT=i()}(void 0,function(){function e(e,t){this.x=e||0,this.y=t||0}function t(t,n){this.pos=t||new e,this.r=n||0}function n(t,n){this.pos=t||new e,this.angle=0,this.offset=new e,this.setPoints(n||[])}function i(t,n,i){this.pos=t||new e,this.w=n||0,this.h=i||0}function o(){this.a=null,this.b=null,this.overlapN=new e,this.overlapV=new e,this.clear()}function r(e,t,n){for(var i=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=e.length,s=0;r>s;s++){var a=e[s].dot(t);i>a&&(i=a),a>o&&(o=a)}n[0]=i,n[1]=o}function s(e,t,n,i,o,s){var a=g.pop(),l=g.pop(),h=v.pop().copy(t).sub(e),c=h.dot(o);if(r(n,o,a),r(i,o,l),l[0]+=c,l[1]+=c,a[0]>l[1]||l[0]>a[1])return v.push(h),g.push(a),g.push(l),!0;if(s){var u=0;if(a[0]<l[0])if(s.aInB=!1,a[1]<l[1])u=a[1]-l[0],s.bInA=!1;else{var p=a[1]-l[0],f=l[1]-a[0];u=f>p?p:-f}else if(s.bInA=!1,a[1]>l[1])u=a[0]-l[1],s.aInB=!1;else{var p=a[1]-l[0],f=l[1]-a[0];u=f>p?p:-f}var y=Math.abs(u);y<s.overlap&&(s.overlap=y,s.overlapN.copy(o),0>u&&s.overlapN.reverse())}return v.push(h),g.push(a),g.push(l),!1}function a(e,t){var n=e.len2(),i=t.dot(e);return 0>i?x:i>n?C:w}function l(e,t){var n=v.pop().copy(e).sub(t.pos),i=t.r*t.r,o=n.len2();return v.push(n),i>=o}function h(e,t){b.pos.copy(e),m.clear();var n=f(b,t,m);return n&&(n=m.aInB),n}function c(e,t,n){var i=v.pop().copy(t.pos).sub(e.pos),o=e.r+t.r,r=o*o,s=i.len2();if(s>r)return v.push(i),!1;if(n){var a=Math.sqrt(s);n.a=e,n.b=t,n.overlap=o-a,n.overlapN.copy(i.normalize()),n.overlapV.copy(i).scale(n.overlap),n.aInB=e.r<=t.r&&a<=t.r-e.r,n.bInA=t.r<=e.r&&a<=e.r-t.r}return v.push(i),!0}function u(e,t,n){for(var i=v.pop().copy(t.pos).sub(e.pos),o=t.r,r=o*o,s=e.calcPoints,l=s.length,h=v.pop(),c=v.pop(),u=0;l>u;u++){var p=u===l-1?0:u+1,f=0===u?l-1:u-1,y=0,d=null;h.copy(e.edges[u]),c.copy(i).sub(s[u]),n&&c.len2()>r&&(n.aInB=!1);var g=a(h,c);if(g===x){h.copy(e.edges[f]);var m=v.pop().copy(i).sub(s[f]);if(g=a(h,m),g===C){var b=c.len();if(b>o)return v.push(i),v.push(h),v.push(c),v.push(m),!1;n&&(n.bInA=!1,d=c.normalize(),y=o-b)}v.push(m)}else if(g===C){if(h.copy(e.edges[p]),c.copy(i).sub(s[p]),g=a(h,c),g===x){var b=c.len();if(b>o)return v.push(i),v.push(h),v.push(c),!1;n&&(n.bInA=!1,d=c.normalize(),y=o-b)}}else{var w=h.perp().normalize(),b=c.dot(w),P=Math.abs(b);if(b>0&&P>o)return v.push(i),v.push(w),v.push(c),!1;n&&(d=w,y=o-b,(b>=0||2*o>y)&&(n.bInA=!1))}d&&n&&Math.abs(y)<Math.abs(n.overlap)&&(n.overlap=y,n.overlapN.copy(d))}return n&&(n.a=e,n.b=t,n.overlapV.copy(n.overlapN).scale(n.overlap)),v.push(i),v.push(h),v.push(c),!0}function p(e,t,n){var i=u(t,e,n);if(i&&n){var o=n.a,r=n.aInB;n.overlapN.reverse(),n.overlapV.reverse(),n.a=n.b,n.b=o,n.aInB=n.bInA,n.bInA=r}return i}function f(e,t,n){for(var i=e.calcPoints,o=i.length,r=t.calcPoints,a=r.length,l=0;o>l;l++)if(s(e.pos,t.pos,i,r,e.normals[l],n))return!1;for(var l=0;a>l;l++)if(s(e.pos,t.pos,i,r,t.normals[l],n))return!1;return n&&(n.a=e,n.b=t,n.overlapV.copy(n.overlapN).scale(n.overlap)),!0}var y={};y.Vector=e,y.V=e,e.prototype={copy:function(e){return this.x=e.x,this.y=e.y,this},clone:function(){return new e(this.x,this.y)},perp:function(){var e=this.x;return this.x=this.y,this.y=-e,this},rotate:function(e){var t=this.x,n=this.y;return this.x=t*Math.cos(e)-n*Math.sin(e),this.y=t*Math.sin(e)+n*Math.cos(e),this},reverse:function(){return this.x=-this.x,this.y=-this.y,this},normalize:function(){var e=this.len();return e>0&&(this.x=this.x/e,this.y=this.y/e),this},add:function(e){return this.x+=e.x,this.y+=e.y,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this},scale:function(e,t){return this.x*=e,this.y*=t||e,this},project:function(e){var t=this.dot(e)/e.len2();return this.x=t*e.x,this.y=t*e.y,this},projectN:function(e){var t=this.dot(e);return this.x=t*e.x,this.y=t*e.y,this},reflect:function(e){var t=this.x,n=this.y;return this.project(e).scale(2),this.x-=t,this.y-=n,this},reflectN:function(e){var t=this.x,n=this.y;return this.projectN(e).scale(2),this.x-=t,this.y-=n,this},dot:function(e){return this.x*e.x+this.y*e.y},len2:function(){return this.dot(this)},len:function(){return Math.sqrt(this.len2())}},y.Circle=t,t.prototype.getAABB=t.prototype.getAABB=function(){var t=this.r,n=this.pos.clone().sub(new e(t,t));return new i(n,2*t,2*t).toPolygon()},y.Polygon=n,n.prototype={setPoints:function(t){var n=!this.points||this.points.length!==t.length;if(n){var i,o=this.calcPoints=[],r=this.edges=[],s=this.normals=[];for(i=0;i<t.length;i++)o.push(new e),r.push(new e),s.push(new e)}return this.points=t,this._recalc(),this},setAngle:function(e){return this.angle=e,this._recalc(),this},setOffset:function(e){return this.offset=e,this._recalc(),this},rotate:function(e){for(var t=this.points,n=t.length,i=0;n>i;i++)t[i].rotate(e);return this._recalc(),this},translate:function(e,t){for(var n=this.points,i=n.length,o=0;i>o;o++)n[o].x+=e,n[o].y+=t;return this._recalc(),this},_recalc:function(){var e,t=this.calcPoints,n=this.edges,i=this.normals,o=this.points,r=this.offset,s=this.angle,a=o.length;for(e=0;a>e;e++){var l=t[e].copy(o[e]);l.x+=r.x,l.y+=r.y,0!==s&&l.rotate(s)}for(e=0;a>e;e++){var h=t[e],c=a-1>e?t[e+1]:t[0],u=n[e].copy(c).sub(h);i[e].copy(u).perp().normalize()}return this},getAABB:function(){for(var t=this.calcPoints,n=t.length,o=t[0].x,r=t[0].y,s=t[0].x,a=t[0].y,l=1;n>l;l++){var h=t[l];h.x<o?o=h.x:h.x>s&&(s=h.x),h.y<r?r=h.y:h.y>a&&(a=h.y)}return new i(this.pos.clone().add(new e(o,r)),s-o,a-r).toPolygon()}},y.Box=i,i.prototype.toPolygon=function(){var t=this.pos,i=this.w,o=this.h;return new n(new e(t.x,t.y),[new e,new e(i,0),new e(i,o),new e(0,o)])},y.Response=o,o.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var v=[],d=0;10>d;d++)v.push(new e);for(var g=[],d=0;5>d;d++)g.push([]);var m=new o,b=new i(new e,1,1).toPolygon(),x=-1,w=0,C=1;return y.pointInCircle=l,y.pointInPolygon=h,y.testCircleCircle=c,y.testPolygonCircle=u,y.testCirclePolygon=p,y.testPolygonPolygon=f,y})},{}],13:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){l.width=e.width,l.height=e.height;for(var t=0;t<e.rows;t++)for(var n=0;n<e.cols;n++){var i=e.cols*t+n;e.map[i]>0&&(h.fillStyle="rgba(24,24,24,1)",h.fillRect(n*e.tilesize,t*e.tilesize,e.tilesize,e.tilesize))}return l.toDataURL("image/png")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./core"),a=e("./sat/SAT.js"),l=document.createElement("canvas"),h=l.getContext("2d"),c=function(){function e(t){i(this,e),this.map=t.map,this.tilesize=16,this.width=t.width,this.height=t.height,this.rows=t.rows,this.cols=t.cols,this.x=t.x,this.y=t.y,this.mapImage=new Image,this.mapImage.src=o(this)}return r(e,[{key:"draw",value:function(){s.Core.ctx.drawImage(this.mapImage,this.x-s.Core.camera.x,this.y-s.Core.camera.y)}},{key:"tileIsSolid",value:function(e,t){return e=e/this.tilesize>>0,t=t/this.tilesize>>0,this.map[this.cols*t+e]>0}},{key:"checkTileCollision",value:function(t,n,i,o){!this.tileIsSolid(16*t-this.x,16*n-this.y)||0!=i.colliding&&1!=o||(i.shape.pos.x=i.np.x,i.shape.pos.y=i.np.y,e.tileShape.pos.x=16*t,e.tileShape.pos.y=16*n,i.colliding=a.testPolygonPolygon(i.shape,e.tileShape,e.collisionResponse),o&&(i.np.x-=e.collisionResponse.overlapV.x,i.np.y-=e.collisionResponse.overlapV.y),e.collisionResponse.clear())}},{key:"checkCollision",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=Math.floor(e.np.x/16),i=Math.floor((e.np.x+16)/16),o=Math.floor(e.np.y/16),r=Math.floor((e.np.y+16)/16);if(e.velocity.y<=0)for(var s=r;s>=o;s--)for(var a=i;a>=n;a--)this.checkTileCollision(a,s,e,t);else if(e.velocity.y>=0)for(var s=o;r>=s;s++)for(var a=n;i>=a;a++)this.checkTileCollision(a,s,e,t);return t&&(e.x=e.np.x,e.y=e.np.y),e.colliding}},{key:"update",value:function(){}}]),e}();n.Tilemap=c,c.tileShape=new a.Box(new a.Vector(0,0),16,16).toPolygon(),c.collisionResponse=new a.Response},{"./core":4,"./sat/SAT.js":12}],14:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function r(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?0:arguments[1];i(this,r),this.x=e,this.y=t};n.Vector2=o},{}],15:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var o=e,r=t,s=n;a=h=l=void 0,i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var h=Object.getPrototypeOf(o);if(null===h)return void 0;e=h,t=r,n=s,i=!0}},a=e("../engine/BasicObject"),l=e("../engine/core"),h=(e("../engine/angle"),e("../engine/distance"),e("../engine/sat/SAT.js"),function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.angle=0,this.ownerReference=e.ownerReference,this.setDead()}return o(t,e),r(t,[{key:"setAlive",value:function(){this.alive=!0,this.np.x=this.ownerReference.x+4,this.np.y=this.ownerReference.y+4,this.colliding=!1}},{key:"setDead",value:function(){this.alive=!1}},{key:"reset",value:function(){this.x=this.y=0,this.shape.pos.x=this.x,this.shape.pos.y=this.y,t.collisionResponse.clear()}},{key:"draw",value:function(){return 0==this.alive?!1:(l.Core.ctx.fillStyle="#e96",void l.Core.ctx.fillRect(this.x-l.Core.camera.x,this.y-l.Core.camera.y,this.width,this.height))}},{key:"update",value:function(){return 0==this.alive?!1:(this.colliding=!1,this.velocity.x=2*Math.cos(this.angle),this.velocity.y=2*Math.sin(this.angle),this.np.x+=this.velocity.x,this.np.y+=this.velocity.y,l.Core.maps[Math.floor(this.y/384)%l.Core.maps.length].checkCollision(this,!1)&&this.setDead(),this.x=this.np.x,void(this.y=this.np.y))}}]),t}(a.BasicObject));n.Bullet=h},{"../engine/BasicObject":1,"../engine/angle":2,"../engine/core":4,"../engine/distance":5,"../engine/sat/SAT.js":12}],16:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var o=e,r=t,s=n;a=h=l=void 0,i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var h=Object.getPrototypeOf(o);if(null===h)return void 0;e=h,t=r,n=s,i=!0}},a=e("../engine/BasicObject"),l=e("../engine/core"),h=e("../engine/angle"),c=e("../engine/distance"),u=e("./bullet"),p=e("../engine/sat/SAT.js"),f=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.bullet=new u.Bullet({x:0,y:0,width:8,height:8,ownerReference:this}),this.goingUpOrDown="down"}return o(t,e),r(t,[{key:"CBCAP",value:function(){this.bullet.shape.pos.x=this.bullet.np.x,this.bullet.shape.pos.y=this.bullet.np.y,l.Core.player.shape.pos.x=l.Core.player.np.x,l.Core.player.shape.pos.y=l.Core.player.np.y;var e=p.testPolygonPolygon(this.bullet.shape,l.Core.player.shape,t.bulletCollisionResponse);return t.bulletCollisionResponse.clear(),e}},{key:"kill",value:function(){this.visible=this.active=!1}},{key:"draw",value:function(){0!=this.visible&&(this.bullet.draw(),l.Core.ctx.fillStyle="#f52dee",c.distance(this.x+this.width/2,this.y+this.height/2,l.Core.player.x+l.Core.player.width/2,l.Core.player.y+l.Core.player.height/2)<64&&0==this.bullet.alive&&(l.Core.ctx.fillStyle="#2f3e3f"),l.Core.ctx.fillRect(this.x-l.Core.camera.x,this.y-l.Core.camera.y,this.width,this.height))}},{key:"update",value:function(){0!=this.active&&(this.bullet.update(),c.distance(this.x+this.width/2,this.y+this.height/2,l.Core.player.x+l.Core.player.width/2,l.Core.player.y+l.Core.player.height/2)<64&&0==this.bullet.alive&&(this.bullet.angle=h.angle(this.x+this.width/2,this.y+this.height/2,l.Core.player.x+l.Core.player.width/2,l.Core.player.y+l.Core.player.height/2),this.bullet.np.x=this.x+4,this.bullet.np.y=this.y+4,this.bullet.setAlive()),this.CBCAP()&&(l.Core.resetGame(),this.bullet.setDead()))}}]),t}(a.BasicObject);n.Enemy=f,f.bulletCollisionResponse=new p.Response},{"../engine/BasicObject":1,"../engine/angle":2,"../engine/core":4,"../engine/distance":5,"../engine/sat/SAT.js":12,"./bullet":15}],17:[function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(e,t,n){for(var i=!0;i;){var o=e,r=t,s=n;a=h=l=void 0,i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var h=Object.getPrototypeOf(o);if(null===h)return void 0;e=h,t=r,n=s,i=!0}},r=e("../engine/game"),s=e("../engine/core"),a=e("../engine/vector2"),l=e("./mapPiece"),h=(e("../engine/BasicObject"),e("./maps")),c=e("./player"),u=function(e){function r(e){t(this,r),o(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,e),s.Core.maps=[],this.lastMapIndex=0,this.player=new c.Player({x:64,y:128,width:16,height:16}),s.Core.player=this.player,s.Core.camera.setObjectToFollow(this.player),this.initMaps(),s.Core.resetGame=this.resetGame}return n(r,e),i(r,[{key:"resetGame",value:function(){for(var e=0;e<h.MAPS.length;e++)s.Core.maps[e].onResetGame(0,384*e);this.player.np.x=64,this.player.np.y=128,s.Core.camera.reset(),this.player.reset()}},{key:"initMaps",value:function(){for(var e=0;e<h.MAPS.length;e++)s.Core.maps[e]=new l.MapPiece({map:h.MAPS[e],width:240,height:384,rows:24,cols:15,x:0,y:384*e});for(var e=0;2>e;e++)for(var t=s.Core.maps[e].rows*e;t<s.Core.maps[e].rows*(e+1);++t)for(var n=0;n<s.Core.maps[e].cols;++n){var i=s.Core.maps[e].cols*(t-s.Core.maps[e].rows*e)+n;s.Core.pathfinderGrid.setWalkableAt(n,t,0==s.Core.maps[e].map[i])}}},{key:"draw",value:function(){o(Object.getPrototypeOf(r.prototype),"draw",this).call(this);for(var e=s.Core.camera.normalizedMapY;e<=s.Core.camera.normalizedMapHeight;e++)s.Core.maps[e%s.Core.maps.length].draw();this.player.draw()}},{key:"update",value:function(){if(o(Object.getPrototypeOf(r.prototype),"update",this).call(this),s.Core.pathfinderDirty=!1,this.lastMapIndex!=s.Core.camera.normalizedMapHeight){this.lastMapIndex=s.Core.camera.normalizedMapHeight;var e=0;s.Core.pathfinderDirty=!0;for(var t=s.Core.camera.normalizedMapY;t<=s.Core.camera.normalizedMapHeight;t++){for(var n=s.Core.maps[t%s.Core.maps.length].rows*e;n<s.Core.maps[t%s.Core.maps.length].rows*(e+1);++n)for(var i=0;i<s.Core.maps[t%s.Core.maps.length].cols;++i){var a=s.Core.maps[t%s.Core.maps.length].cols*(n-s.Core.maps[t%s.Core.maps.length].rows*e)+i;s.Core.pathfinderGrid.setWalkableAt(i,n,0==s.Core.maps[t%s.Core.maps.length].map[a])}e++}}for(var t=s.Core.camera.normalizedMapY;t<=s.Core.camera.normalizedMapHeight;t++)s.Core.maps[t%s.Core.maps.length].update();this.player.update(),s.Core.mouse.justPressed=!1}}]),r}(r.Game);new u({name:"-",screen:{size:new a.Vector2(240,384),center:!0,background:"#ccc"},containerID:"container"})},{"../engine/BasicObject":1,"../engine/core":4,"../engine/game":6,"../engine/vector2":14,"./mapPiece":18,"./maps":19,"./player":20}],18:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var o=e,r=t,s=n;a=h=l=void 0,i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var h=Object.getPrototypeOf(o);if(null===h)return void 0;e=h,t=r,n=s,i=!0}},a=e("../engine/tilemap"),l=e("../engine/random"),h=e("./enemy"),c=e("../engine/core"),u=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.enemies=[],this.placeEnemies()}return o(t,e),r(t,[{key:"placeEnemies",value:function(){for(var e=0;3>e;e++){var t=this.findEmptyTile();this.enemies[e]=new h.Enemy({x:16*t.x+this.x,y:16*t.y+this.y,width:16,height:16}),0==this.y&&(this.enemies[e].active=!1,this.enemies[e].visible=!1)}}},{key:"findEmptyTile",value:function(){var e=l.Random["int"](0,this.cols-1),t=l.Random["int"](0,this.rows-1);return 0==this.tileIsSolid(16*e,16*t)?{x:e,y:t}:0==l.Random["int"](0,1)?{x:e,y:l.Random["int"](0,1)}:{x:e,y:l.Random["int"](this.rows-2,this.rows-1)}}},{key:"onResetGame",value:function(e,t){this.x=e,this.y=t,0!=this.y&&this.resetEnemies()}},{key:"resetEnemies",value:function(){for(var e=0;e<this.enemies.length;e++){var t=this.findEmptyTile();this.enemies[e].x=16*t.x+this.x,this.enemies[e].y=16*t.y+this.y,this.enemies[e].active=!0,this.enemies[e].visible=!0,this.enemies[e].bullet.setDead()}}},{key:"draw",value:function(){s(Object.getPrototypeOf(t.prototype),"draw",this).call(this);for(var e=0;e<this.enemies.length;e++)this.enemies[e].draw()}},{key:"update",value:function(){s(Object.getPrototypeOf(t.prototype),"update",this).call(this);for(var e=0;e<this.enemies.length;e++)this.enemies[e].update();c.Core.camera.y>this.height+this.y&&(this.y+=4*this.height,this.resetEnemies())}}]),t}(a.Tilemap);n.MapPiece=u},{"../engine/core":4,"../engine/random":10,"../engine/tilemap":13,"./enemy":16}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=[];n.MAPS=i,i[0]=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],i[1]=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],i[2]=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
i[3]=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1]},{}],20:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e,t,n){for(var i=!0;i;){var o=e,r=t,s=n;a=h=l=void 0,i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var h=Object.getPrototypeOf(o);if(null===h)return void 0;e=h,t=r,n=s,i=!0}},a=e("../engine/core"),l=e("../engine/BasicObject"),h=e("../engine/angle"),c=(e("../engine/lerp"),e("../engine/distance")),u=e("./bullet"),p=e("pathfinding"),f=e("../engine/sat/SAT.js"),y=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.goingUpOrDown="up",this.angleToGo=h.angle(this.x+this.width/2,this.y+this.height/2,a.Core.mouse.lastClick.x,a.Core.mouse.lastClick.y),this.speed=10,this.path=[],this.pathNormalizedMapY=a.Core.camera.normalizedMapY,this.bullet=new u.Bullet({x:0,y:0,width:8,height:8,ownerReference:this})}return o(t,e),r(t,[{key:"shoot",value:function(e,t){0==this.bullet.alive&&(this.bullet.angle=h.angle(this.x+this.width/2,this.y+this.height/2,e,t),this.bullet.np.x=this.x+4,this.bullet.np.y=this.y+4,this.bullet.setAlive())}},{key:"draw",value:function(){this.bullet.draw(),a.Core.ctx.fillStyle="#ff006c",a.Core.ctx.fillRect(this.x-a.Core.camera.x,this.y-a.Core.camera.y,this.width,this.height)}},{key:"reset",value:function(){this.path=[],this.pathNormalizedMapY=0,this.speed=0,this.angleToGo=0}},{key:"moveTo",value:function(){if(0==this.path.length)return!1;var e=16*this.path[0][0]+this.width/2,t=16*(this.path[0][1]+24*this.pathNormalizedMapY)+this.height/2;a.Core.ctx.fillStyle="#000",a.Core.ctx.fillRect(16*e,16*t,16,16),this.angleToGo=h.angle(this.x+this.width/2,this.y+this.height/2,e,t),this.velocity.x=Math.cos(this.angleToGo)*this.speed,this.velocity.y=Math.sin(this.angleToGo)*this.speed,c.distance(this.x+this.width/2,this.y+this.height/2,e,t)>=this.speed?(this.np.x+=this.velocity.x,this.np.y+=this.velocity.y,this.speed=5):(this.np.x=e-this.width/2,this.np.y=t-this.height/2,this.speed=0,this.path.shift())}},{key:"checkBulletCollisionAgainstEnemy",value:function(){for(var e=0;e<a.Core.maps[Math.floor(this.bullet.y/384)%a.Core.maps.length].enemies.length;e++){var n=a.Core.maps[Math.floor(this.bullet.y/384)%a.Core.maps.length].enemies[e];n.shape.pos.x=n.x,n.shape.pos.y=n.y,this.bullet.shape.pos.x=this.bullet.np.x,this.bullet.shape.pos.y=this.bullet.np.y;var i=f.testPolygonPolygon(this.bullet.shape,n.shape,t.bulletCollisionResponse);i&&n.visible&&(n.kill(),this.bullet.setDead()),t.bulletCollisionResponse.clear()}}},{key:"update",value:function(){if(this.bullet.update(),this.np.y=Math.max(this.np.y,a.Core.camera.y),a.Core.maps[Math.floor(this.y/384)%a.Core.maps.length].checkCollision(this),this.playerYPos=a.Core.camera.normalizedMapY,a.Core.mouse.justPressed&&"Free"==a.Core.mouse.state){var e=a.Core.pathfinderGrid.clone();this.pathNormalizedMapY=a.Core.camera.normalizedMapY,this.path=a.Core.pathfinder.findPath(this.x/16>>0,(this.y/16>>0)-24*a.Core.camera.normalizedMapY,a.Core.mouse.lastClick.x/16>>0,(a.Core.mouse.lastClick.y/16>>0)-24*a.Core.camera.normalizedMapY,e),0!=this.path.length&&(this.path=p.Util.smoothenPath(e,this.path))}this.moveTo(a.Core.mouse.lastClick),this.checkBulletCollisionAgainstEnemy()}}]),t}(l.BasicObject);n.Player=y,y.bulletCollisionResponse=new f.Response},{"../engine/BasicObject":1,"../engine/angle":2,"../engine/core":4,"../engine/distance":5,"../engine/lerp":8,"../engine/sat/SAT.js":12,"./bullet":15,pathfinding:21}],21:[function(e,t){t.exports=e("./src/PathFinding")},{"./src/PathFinding":24}],22:[function(e,t){t.exports=e("./lib/heap")},{"./lib/heap":23}],23:[function(e,t){(function(){var e,n,i,o,r,s,a,l,h,c,u,p,f,y,v;i=Math.floor,c=Math.min,n=function(e,t){return t>e?-1:e>t?1:0},h=function(e,t,o,r,s){var a;if(null==o&&(o=0),null==s&&(s=n),0>o)throw Error("lo must be non-negative");for(null==r&&(r=e.length);r>o;)a=i((o+r)/2),s(t,e[a])<0?r=a:o=a+1;return[].splice.apply(e,[o,o-o].concat(t)),t},s=function(e,t,i){return null==i&&(i=n),e.push(t),y(e,0,e.length-1,i)},r=function(e,t){var i,o;return null==t&&(t=n),i=e.pop(),e.length?(o=e[0],e[0]=i,v(e,0,t)):o=i,o},l=function(e,t,i){var o;return null==i&&(i=n),o=e[0],e[0]=t,v(e,0,i),o},a=function(e,t,i){var o;return null==i&&(i=n),e.length&&i(e[0],t)<0&&(o=[e[0],t],t=o[0],e[0]=o[1],v(e,0,i)),t},o=function(e,t){var o,r,s,a,l,h;for(null==t&&(t=n),a=function(){h=[];for(var t=0,n=i(e.length/2);n>=0?n>t:t>n;n>=0?t++:t--)h.push(t);return h}.apply(this).reverse(),l=[],r=0,s=a.length;s>r;r++)o=a[r],l.push(v(e,o,t));return l},f=function(e,t,i){var o;return null==i&&(i=n),o=e.indexOf(t),-1!==o?(y(e,0,o,i),v(e,o,i)):void 0},u=function(e,t,i){var r,s,l,h,c;if(null==i&&(i=n),s=e.slice(0,t),!s.length)return s;for(o(s,i),c=e.slice(t),l=0,h=c.length;h>l;l++)r=c[l],a(s,r,i);return s.sort(i).reverse()},p=function(e,t,i){var s,a,l,u,p,f,y,v,d,g;if(null==i&&(i=n),10*t<=e.length){if(u=e.slice(0,t).sort(i),!u.length)return u;for(l=u[u.length-1],v=e.slice(t),p=0,y=v.length;y>p;p++)s=v[p],i(s,l)<0&&(h(u,s,0,null,i),u.pop(),l=u[u.length-1]);return u}for(o(e,i),g=[],a=f=0,d=c(t,e.length);d>=0?d>f:f>d;a=d>=0?++f:--f)g.push(r(e,i));return g},y=function(e,t,i,o){var r,s,a;for(null==o&&(o=n),r=e[i];i>t&&(a=i-1>>1,s=e[a],o(r,s)<0);)e[i]=s,i=a;return e[i]=r},v=function(e,t,i){var o,r,s,a,l;for(null==i&&(i=n),r=e.length,l=t,s=e[t],o=2*t+1;r>o;)a=o+1,r>a&&!(i(e[o],e[a])<0)&&(o=a),e[t]=e[o],t=o,o=2*t+1;return e[t]=s,y(e,l,t,i)},e=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=s,e.pop=r,e.replace=l,e.pushpop=a,e.heapify=o,e.updateItem=f,e.nlargest=u,e.nsmallest=p,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return r(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return a(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return o(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return f(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),(void 0!==t&&null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)},{}],24:[function(e,t){t.exports={Heap:e("heap"),Node:e("./core/Node"),Grid:e("./core/Grid"),Util:e("./core/Util"),DiagonalMovement:e("./core/DiagonalMovement"),Heuristic:e("./core/Heuristic"),AStarFinder:e("./finders/AStarFinder")}},{"./core/DiagonalMovement":25,"./core/Grid":26,"./core/Heuristic":27,"./core/Node":28,"./core/Util":29,"./finders/AStarFinder":30,heap:22}],25:[function(e,t){var n={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};t.exports=n},{}],26:[function(e,t){function n(e,t,n){var i;"object"!=typeof e?i=e:(t=e.length,i=e[0].length,n=e),this.width=i,this.height=t,this.nodes=this._buildNodes(i,t,n)}var i=e("./Node"),o=e("./DiagonalMovement");n.prototype._buildNodes=function(e,t,n){var o,r,s=Array(t);for(o=0;t>o;++o)for(s[o]=Array(e),r=0;e>r;++r)s[o][r]=new i(r,o);if(void 0===n)return s;if(n.length!==t||n[0].length!==e)throw Error("Matrix size does not fit");for(o=0;t>o;++o)for(r=0;e>r;++r)n[o][r]&&(s[o][r].walkable=!1);return s},n.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},n.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},n.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},n.prototype.setWalkableAt=function(e,t,n){this.nodes[t][e].walkable=n},n.prototype.getNeighbors=function(e,t){var n=e.x,i=e.y,r=[],s=!1,a=!1,l=!1,h=!1,c=!1,u=!1,p=!1,f=!1,y=this.nodes;if(this.isWalkableAt(n,i-1)&&(r.push(y[i-1][n]),s=!0),this.isWalkableAt(n+1,i)&&(r.push(y[i][n+1]),l=!0),this.isWalkableAt(n,i+1)&&(r.push(y[i+1][n]),c=!0),this.isWalkableAt(n-1,i)&&(r.push(y[i][n-1]),p=!0),t===o.Never)return r;if(t===o.OnlyWhenNoObstacles)a=p&&s,h=s&&l,u=l&&c,f=c&&p;else if(t===o.IfAtMostOneObstacle)a=p||s,h=s||l,u=l||c,f=c||p;else{if(t!==o.Always)throw Error("Incorrect value of diagonalMovement");a=!0,h=!0,u=!0,f=!0}return a&&this.isWalkableAt(n-1,i-1)&&r.push(y[i-1][n-1]),h&&this.isWalkableAt(n+1,i-1)&&r.push(y[i-1][n+1]),u&&this.isWalkableAt(n+1,i+1)&&r.push(y[i+1][n+1]),f&&this.isWalkableAt(n-1,i+1)&&r.push(y[i+1][n-1]),r},n.prototype.clone=function(){var e,t,o=this.width,r=this.height,s=this.nodes,a=new n(o,r),l=Array(r);for(e=0;r>e;++e)for(l[e]=Array(o),t=0;o>t;++t)l[e][t]=new i(t,e,s[e][t].walkable);return a.nodes=l,a},t.exports=n},{"./DiagonalMovement":25,"./Node":28}],27:[function(e,t){t.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var n=Math.SQRT2-1;return t>e?n*e+t:n*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},{}],28:[function(e,t){function n(e,t,n){this.x=e,this.y=t,this.walkable=void 0===n?!0:n}t.exports=n},{}],29:[function(e,t,n){function i(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function o(e,t){var n=i(e),o=i(t);return n.concat(o.reverse())}function r(e){var t,n,i,o,r,s=0;for(t=1;t<e.length;++t)n=e[t-1],i=e[t],o=n[0]-i[0],r=n[1]-i[1],s+=Math.sqrt(o*o+r*r);return s}function s(e,t,n,i){var o,r,s,a,l,h,c=Math.abs,u=[];for(s=c(n-e),a=c(i-t),o=n>e?1:-1,r=i>t?1:-1,l=s-a;;){if(u.push([e,t]),e===n&&t===i)break;h=2*l,h>-a&&(l-=a,e+=o),s>h&&(l+=s,t+=r)}return u}function a(e){var t,n,i,o,r,a,l=[],h=e.length;if(2>h)return l;for(r=0;h-1>r;++r)for(t=e[r],n=e[r+1],i=s(t[0],t[1],n[0],n[1]),o=i.length,a=0;o-1>a;++a)l.push(i[a]);return l.push(e[h-1]),l}function l(e,t){var n,i,o,r,a,l,h,c,u,p,f,y=t.length,v=t[0][0],d=t[0][1],g=t[y-1][0],m=t[y-1][1];for(n=v,i=d,a=[[n,i]],l=2;y>l;++l){for(c=t[l],o=c[0],r=c[1],u=s(n,i,o,r),f=!1,h=1;h<u.length;++h)if(p=u[h],!e.isWalkableAt(p[0],p[1])){f=!0;break}f&&(lastValidCoord=t[l-1],a.push(lastValidCoord),n=lastValidCoord[0],i=lastValidCoord[1])}return a.push([g,m]),a}function h(e){if(e.length<3)return e;var t,n,i,o,r,s,a=[],l=e[0][0],h=e[0][1],c=e[1][0],u=e[1][1],p=c-l,f=u-h;for(r=Math.sqrt(p*p+f*f),p/=r,f/=r,a.push([l,h]),s=2;s<e.length;s++)t=c,n=u,i=p,o=f,c=e[s][0],u=e[s][1],p=c-t,f=u-n,r=Math.sqrt(p*p+f*f),p/=r,f/=r,(p!==i||f!==o)&&a.push([t,n]);return a.push([c,u]),a}n.backtrace=i,n.biBacktrace=o,n.pathLength=r,n.interpolate=s,n.expandPath=a,n.smoothenPath=l,n.compressPath=h},{}],30:[function(e,t){function n(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||r.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=e.heuristic||r.manhattan:this.heuristic=e.heuristic||r.octile}var i=e("heap"),o=e("../core/Util"),r=e("../core/Heuristic"),s=e("../core/DiagonalMovement");n.prototype.findPath=function(e,t,n,r,s){var a,l,h,c,u,p,f,y,v=new i(function(e,t){return e.f-t.f}),d=s.getNodeAt(e,t),g=s.getNodeAt(n,r),m=this.heuristic,b=this.diagonalMovement,x=this.weight,w=Math.abs,C=Math.SQRT2;for(d.g=0,d.f=0,v.push(d),d.opened=!0;!v.empty();){if(a=v.pop(),a.closed=!0,a===g)return o.backtrace(g);for(l=s.getNeighbors(a,b),c=0,u=l.length;u>c;++c)h=l[c],h.closed||(p=h.x,f=h.y,y=a.g+(p-a.x===0||f-a.y===0?1:C),(!h.opened||y<h.g)&&(h.g=y,h.h=h.h||x*m(w(p-n),w(f-r)),h.f=h.g+h.h,h.parent=a,h.opened?v.updateItem(h):(v.push(h),h.opened=!0)))}return[]},t.exports=n},{"../core/DiagonalMovement":25,"../core/Heuristic":27,"../core/Util":29,heap:22}]},{},[17]);